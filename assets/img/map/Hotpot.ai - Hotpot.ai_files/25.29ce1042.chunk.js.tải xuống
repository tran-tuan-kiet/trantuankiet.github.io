(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"3y+j":function(e,t,n){},NJR1:function(e,t,n){},"ab+K":function(e,t,n){"use strict";var c=n("nJ3u"),a=n("O94r"),r=n.n(a),o=n("/UYI"),i=n("nQD+"),s=n("z24s"),l=n("lE29"),u=n("LwEI"),b=n("ERkP"),d=n.n(b);n("NJR1");t.a=function MessageCloseButton(e){var t=e.onClick,n=Object(u.a)(),a=Object(l.a)(),f=Object(b.useRef)(null),O=Object(s.a)(f);return d.a.createElement(i.a,{onClick:t,ref:f,className:r()("drift-widget-message-close-button","drift-widget-close-button--align-".concat(n),{"keyboard-focused":O}),"aria-label":"Close Drift Widget messenger preview overlay"},d.a.createElement("style",null,".drift-widget-message-close-button.keyboard-focused {\n          opacity: 1;\n        }\n        .drift-widget-message-close-button.keyboard-focused:before {\n          ".concat(Object(c.a)(a.activeColor,20,-3,-3),"\n        }\n        ")),d.a.createElement(o.a,{width:10,height:10}))}},dT9Q:function(e,t,n){"use strict";var c=n("s8DI"),a=n("nJ3u"),r=n("O94r"),o=n.n(r),i=n("nQD+"),s=n("ab+K"),l=n("7oh4"),u=n("nedb"),b=n("Erxq"),d=n("z24s"),f=n("58kB"),O=n("hEj5"),j=n("lE29"),g=n("IJKc"),m=n("LwEI"),v=n("SsZN"),p=n("vjCh"),E=n("qixE"),w=n("xwTo"),h=n("da4L"),k=n("X9/c"),C=n("g6eD"),y=n("2XY6"),I=n("i9gz"),N=n("RhEL"),_=n("LVcX"),S=n("ERkP"),L=n.n(S),M=n("oPI6"),D=n("uDfI"),R=n("vTYT"),T=n("y0on");n("pUpc");t.a=function MessagePreview(){var e=Object(O.a)(),t=Object(c.a)(e,2),n=t[0],r=t[1],A=Object(D.b)(),P=Object(S.useState)(null),x=Object(c.a)(P,2),J=x[0],B=x[1],W=Object(S.useRef)(null),U=Object(d.a)(W),F=Object(D.c)(function(e){return e.conversations}).activeConversation,H=Object(g.a)(),X=Object(u.a)(),z=Object(j.a)(),K=Object(D.c)(y.e),G=Object(D.c)(function(e){return e.view.chatOpen}),V=Object(m.a)(),Y=Object(f.a)(J?J.authorId:null),Q=Object(S.useMemo)(function(){return!(!J||!J.body||G)},[J,G]);Object(S.useEffect)(function setLatestMessageFromConvo(){if(Object(I.a)(H))B(null);else{var e=H.pop()||{};J&&Object(N.a)(e.id,J.id)||B(Object(h.r)(e,100))}},[H]),Object(S.useLayoutEffect)(function updateFrameSize(){if(Q){var e=n?n.width:0,t=n?n.height:0,c=e+l.b+40,a=t+36;Object(k.c)(a,c)}},[n,Q]);var Z=Object(b.a)(J);if(!Q)return null;var q=function dismiss(){J&&(Object(E.c)(F),B({}),Object(k.b)(),$())},$=function dismissPlaybookIfNotInteracted(){if(!Object(w.g)()){var e=Object(_.a)(null,["attributes","playbookId"],X);Object(v.o)(J),Object(p.l)(X.id,e)}},ee=Object(h.c)(J),te=Object(T.a)(Y.recipient.name,ee);return L.a.createElement(L.a.Fragment,null,L.a.createElement("style",null,"\n          .drift-widget-message-preview .drift-widget-message-preview-text p.keyboard-focused {\n            ".concat(Object(a.c)(z.activeColor),"\n          }\n        ")),K&&L.a.createElement("div",{className:"drift-widget-message-preview-wrapper",key:"".concat(J.id,"-preview-box")},L.a.createElement(M.b,{message:te,"aria-live":"polite",clearOnUnmount:!0}),L.a.createElement("div",{className:"drift-widget-message-preview drift-widget-message-preview--align-".concat(V)},V===R.a.RIGHT&&L.a.createElement(s.a,{onClick:q}),L.a.createElement(i.a,{ref:W,onClick:function openChat(){if(Object(k.b)(),Z){var e=Object(_.a)(null,["attributes","playbookId"],X);Object(v.n)(J),Object(p.l)(X.id,e)}A(Object(C.e)({chatOpen:!0}))},className:"drift-widget-message-preview-text drift-widget-message-preview-text--align-".concat(V),"aria-label":"".concat(te?te+" - ":"","Click to open chat")},L.a.createElement("p",{ref:r,className:o()({"keyboard-focused":U})},ee)),V===R.a.LEFT&&L.a.createElement(s.a,{onClick:q}))))}},g3yi:function(e,t,n){"use strict";var c=n("nfbA"),a=n("efbE"),r=n("LeJ0"),o=function getDefaultAuthParams(e){return{org_id:e,client_id:r.a.CLIENT_ID,consent_id:"has_consent"}};n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s});var i=function executeWidgetBootstrapForMode(e,t,n){switch(e){case"LANDING_PAGE":return u(t,n);case"CHAT":default:return l(t,n)}},s=function executeBootstrapPing(e){return a.c.post("widget_bootstrap/ping",e)},l=function widgetBootstrap(e,t){var n=o(e);return a.b.post("widget_bootstrap",{data:Object(c.a)(Object(c.a)({},n),t)})},u=function landingPageBootstrap(e,t){var n=o(e);return a.b.post("widget_bootstrap/landing_page",{data:Object(c.a)(Object(c.a)({},n),t)})}},iJtH:function(e,t,n){"use strict";n.d(t,"a",function(){return c});const c="visitCounts"},pUpc:function(e,t,n){},xAY9:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var c=n("efbE"),a=function getEmbedConfiguration(e){return c.l.get("/embeds/".concat(e,".json"))}},xKh3:function(e,t,n){"use strict";n.d(t,"b",function(){return b}),n.d(t,"a",function(){return d});var c=n("mj2O"),a=n.n(c),r=n("7SM1"),o=n("LeJ0"),i=n("Gzp1"),s=n("0lfv"),l=n("l+Xe"),u=n("/l56"),b=function OpenSocket(e){var t=e.session_token,n=e.org_id,c=e.socketCluster,a=e.ip,r=o.a.WS_PROTOCOL,l="LOCAL"===o.a.WS_USER_ENV?"":"".concat(n,"-"),u=f(n,l,c),b="".concat(r,"://").concat(u,"/ws"),d=new i.Socket(b,{params:{session_token:t,remote_ip:a},timeout:1e4,reconnectAfterMs:function reconnectAfterMs(e){return[1e3,2e3,5e3,1e4][e-1]||1e4},rejoinAfterMs:function rejoinAfterMs(e){return[1e3,2e3,5e3][e-1]||1e4}});return d.connect(),d.onError(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Object(s.n)({data:["Failed to connect to socket: ".concat(b)].concat(t)})}),d.onClose(function(){return Object(s.n)({data:["socket ".concat(b," has closed")]})}),d},d=function(){var e=Object(r.a)(a.a.mark(function _callee2(e){var t,n,c,o;return a.a.wrap(function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:return t=e.channelName,n=e.socket,c=e.events,o=new Promise(function(){var e=Object(r.a)(a.a.mark(function _callee(e,r){var o;return a.a.wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:o=n.channel(t),c.forEach(function(e){var t=e.topic,n=e.event;o.on(t,n)}),o.join().receive("ok",function(){e({channel:o})}).receive("error",function(e){Object(s.n)({data:["Error connecting to channel: ".concat(t)]}),r(e)}).receive("timeout",function(e){Object(s.n)({data:["Joining the ".concat(t," channel timed out. ")]})});case 3:case"end":return a.stop()}},_callee)}));return function(t,n){return e.apply(this,arguments)}}()),i.abrupt("return",o);case 3:case"end":return i.stop()}},_callee2)}));return function JoinChannel(t){return e.apply(this,arguments)}}(),f=function _resolveSocketBaseForType(e,t,n){switch(n){case u.c.CHAT:return"".concat(Object(l.d)(e));case u.c.USER:return o.a.WS_USER_BASE;case u.c.PRESENCE:return"".concat(t).concat(Object(l.c)(e));case u.c.VISITOR_PRESENCE:return o.a.WS_VISITOR_PRESENCE_BASE;default:return""}}},yXOZ:function(e,t,n){"use strict";var c=n("nfbA"),a=n("s8DI"),r=n("nJ3u"),o=n("O94r"),i=n.n(o),s=n("+Kbs"),l=n("yEsl"),u=n("hSLT"),b=n("nedb"),d=n("mZ4K"),f=n("UvQv"),O=n("fL0f"),j=n("Erxq"),g=n("6wvX"),m=n("z24s"),v=n("tLIi"),p=n("o3t1"),E=n("58kB"),w=n("lE29"),h=n("cwuI"),k=n("IJKc"),C=n("LwEI"),y=n("Hnjx"),I=n("SsZN"),N=n("vjCh"),_=n("g6eD"),S=n("2XY6"),L=n("LVcX"),M=n("0B8E"),D=n("ERkP"),R=n.n(D),T=n("Tr4L"),A=n("uDfI"),P=n("MFhO"),x=n("7oto"),J=n("1kux"),B=n("rTkt"),W=(n("3y+j"),"SENDER"),U="MEGAPHONE",F="THEME_ICON";t.a=function WidgetIcon(){var e=Object(D.useRef)(null),t=Object(m.a)(e),n=Object(f.a)(),o=n.isDisabled,H=n.setIsDisabled,X=Object(p.a)(),z=X.hoverProps,K=X.isHovered,G=Object(A.b)(),V=Object(T.a)().t,Y=Object(A.c)(function(e){return e.view.chatOpen}),Q=Object(A.c)(function(e){return e.session.gdpr}),Z=Object(A.c)(S.e),q=Object(A.c)(function(e){return!!e.conversations.activeConversation}),$=Object(C.a)(),ee=Object(b.a)(),te=Object(A.c)(function(e){return Object(L.a)(!1,["embed","configuration","theme"],e)}).unreadBadgeEnabled,ne=Object(k.a)(),ce=Object(A.c)(function(e){return e.view.isChatTakeover}),ae=Object(v.a)(),re=Object(j.a)(ae),oe=Object(w.a)(),ie=oe.activeColor,se=oe.backgroundStyles,le=oe.widgetSecondaryColor,ue=Object(D.useMemo)(function(){return K?Object(B.c)(se.background,-35):se.background},[K,se]),be=Object(h.a)(),de=be.Icon,fe=be.customIcon,Oe=be.hasCustomIcon,je=Object(d.a)(),ge=Object(u.a)().type,me=je||Object(L.a)(void 0,["authorId"],ae),ve=Object(E.a)(me).recipient,pe=ne?Object(M.a)(ne).length:0,Ee=ge===P.a.SLIDER,we=me&&(Ee||pe>0),he=Object(O.a)(["titleNotificationEnabled"]),ke=Object(a.a)(he,1)[0],Ce=void 0!==ke&&ke,ye=Object(D.useMemo)(function(){return we?W:Ee&&!me?U:F},[me,Ee,we]),Ie=Object(g.a)(),Ne=Object(y.a)();Object(D.useEffect)(function(){Ce&&Object(x.a)({topic:"page-notification-update",message:{totalUnreadMessages:pe,pageTitleNotificationMsg:V("titleNotifier.newMessageNotification")}})},[pe,Ce,V]),Object(D.useEffect)(function(){o&&!Ee&&H(!1)},[o,Ee,H]);Object(D.useEffect)(function(){Object(x.a)({topic:"toggle-widget-controller",message:{isChatTakeover:ce,open:Y,hasActiveConversation:q&&Q.hasConsent}})},[Y,Q,q,ce]),Object(D.useEffect)(function(){ne&&ne.length>0&&Object(J.a)()},[ne]);var _e=Object(D.useMemo)(function(){return we&&!Y?null:{background:"".concat(ue)}},[we,Y,ue]),Se=Object(D.useMemo)(function(){return!Oe||we||Y?null:K?Object(c.a)({opacity:.65},fe):fe},[fe,we,Y,Oe,K]),Le=Object(D.useMemo)(function(){if(Y)return ve.name?"Click to close chat with ".concat(ve.name," in the Drift Widget messenger"):"Click to close Drift Widget messenger";var e=ve.name?"Click to open chat with ".concat(ve.name," in the Drift Widget messenger"):"Click to open Drift Widget messenger";return te&&pe>0?"".concat(e," - Unread messages: ").concat(pe):e},[Y,te,ve.name,pe]);return R.a.createElement(R.a.Fragment,null,R.a.createElement("style",null,"\n          .drift-widget-controller.keyboard-focused:before {\n            ".concat(Object(r.a)(ie,64),"\n          }\n        ")),Z&&R.a.createElement("button",Object.assign({className:i()("drift-widget-controller drift-widget-controller--align-".concat($),[Ne],{"drift-widget-controller--closed":!Ie&&Y,"drift-widget-controller--custom-icon":Oe,"drift-widget-controller--avatar":we,"drift-widget-controller--hide":ce,"drift-widget-controller--disabled":o,"keyboard-focused":t}),disabled:o,onClick:function onToggleChat(){if(!Y&&pe>0&&re){var e=Object(L.a)(null,["attributes","playbookId"],ee);Object(N.l)(ee.id,e),Object(I.n)(ae)}!function toggle(e){Ee?(Object(x.a)({topic:"slider:showDetails",message:{}}),H(!0)):G(Object(_.e)({chatOpen:e})),e&&Object(x.a)({topic:"reset-controller-size"})}(!Y)},style:_e},z,{"aria-label":Le,"aria-disabled":o,"aria-hidden":o,ref:e}),R.a.createElement("div",{className:i()("drift-widget-controller-icon",[Ne]),style:Se},R.a.createElement("div",{className:"drift-controller-icon--active"},ye===U&&R.a.createElement(s.n,{fill:le}),ye===W&&R.a.createElement(l.a,{className:i()([Ne],"drift-controller-icon--avatar"),avatarClassName:i()([Ne],"drift-controller-icon--avatar-avatar"),id:me}),ye===F&&!Oe&&de),R.a.createElement("div",{className:"drift-controller-icon--close",style:{backgroundColor:le}})),te&&pe>0&&R.a.createElement("div",{className:"drift-controller-icon-unread"},Math.min(pe,99))))}}}]);